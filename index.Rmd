---
title: rCharts NYT Interactive Home Price
author: Timely Portfolio  (all credit to NYTimes)
github: {user: timelyportfolio, repo: rCharts_nyt_home_price, branch: "gh-pages"}
framework: bootstrap
mode: selfcontained
widgets: "nyt_home"
highlighter: prettify
hitheme: twitter-bootstrap
lead : >
  NYT's Home Price Visualization with rCharts
---

# Disclaimer and Attribution

**I claim absolutely no credit for this visualization, which I consider one of the most instructive I have ever seen.  All credit belongs to the <a href = "http://www.nytimes.com/interactive/2011/05/31/business/economy/case-shiller-index.html" >original source</a>.  If anybody believes this to be not fair use, I will take it down immediately.  I am implicitly assuming approval for this fork due to the <a href = "http://datastori.es/data-stories-22-nyt-graphics-and-d3-with-mike-bostock-and-shan-carter/">interview</a>.** 

```{r echo=F, warning= F, message=F}
opts_chunk$set(message = FALSE, warning = FALSE, error = FALSE, tidy = FALSE, cache = FALSE,results = 'asis' )
```

---
# Another Favorite from NYT
  


---
# Reusable Version in rCharts

```{r results = 'asis'}
require(rCharts)

p1 <- rCharts$new()
p1$setLib('libraries/widgets/nyt_home')
p1$setTemplate(script = "libraries/widgets/nyt_home/layouts/nyt_home.html")

p1$set(description = "The Standard & Poor's Case-Shiller Home Price Index for 20 major metropolitan areas is one of the most closely watched gauges of the housing market. The figures for April were released June 25. Figures shown here are not seasonally adjusted or adjusted for inflation.")

#get the data and convert to a format that we would expect from melted xts
#will be typical
#also original only uses a single value (val) and not other 
data <- read.csv("data/case-shiller-tiered2.csv", stringsAsFactors = F)

data.melt <- data.frame(
  format(as.Date(paste(data[,3],data[,4],"01",sep="-"),format = "%Y-%m-%d")),
  data[,c(1,2,5)]
)
colnames(data.melt) <- c("date",colnames(data.melt)[-1])


p1$set(data = data.melt)
p1$set(groups = "citycode")
#cat(noquote(p1$html()))
```

---
# Now With Our Own Data

```{r results = 'asis'}
p2 <- rCharts$new()
p2$setLib('libraries/widgets/nyt_home')
p2$setTemplate(script = "libraries/widgets/nyt_home/layouts/nyt_home.html")

p2$set(description = "This data comes from the managers dataset included in the R package PerformanceAnalytics.")

#get the data and convert to a format that we would expect from melted xts
#will be typical
#also original only uses a single value (val) and not other 
require(reshape2)
require(PerformanceAnalytics)

data(managers)
managers.melt <- melt(
  data.frame( index( managers ), coredata(cumprod( managers+1 )*100 ) ),
  id.vars = 1
)
colnames(managers.melt) <- c("date", "manager","val")
managers.melt[,"date"] <- format(managers.melt[,"date"],format = "%Y-%m-%d")
p2$set(data = managers.melt)
p2$set(groups = "manager")
cat(noquote(p2$html()))
```